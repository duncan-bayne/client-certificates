worker_processes 1;

events {
    worker_connections 1024;
}


http {

  passenger_root /var/lib/gems/1.9.1/gems/passenger-4.0.5;
  passenger_ruby /usr/bin/ruby1.9.3;

  server {
	listen 443;
	server_name localhost;

	ssl on;
	ssl_certificate /opt/nginx/ssl/server.crt;
	ssl_certificate_key /opt/nginx/ssl/server.key;
	ssl_session_timeout 5m;
	ssl_protocols SSLv3 TLSv1;
	ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv3:+EXP;
	ssl_prefer_server_ciphers on;
	ssl_client_certificate /opt/nginx/ssl/client.crt;
	ssl_verify_client on;

	root /home/duncan/client-certificates/server;
	passenger_enabled on;

	access_log /home/duncan/client-certificates/server/log/nginx_access.log;
	error_log /home/duncan/client-certificates/server/log/nginx_error.log;
  }

}
